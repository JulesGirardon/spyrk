#!/usr/bin/env bash
set -euo pipefail
source "$(dirname "$0")/bin/common"

# Colors
GREEN='\033[0;32m'
RED='\033[0;31m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

echo -e "${CYAN}========================================${NC}"
echo -e "${CYAN}         Installing dependencies        ${NC}"
echo -e "${CYAN}========================================${NC}"

check_uv
check_venv
make_lock

for group in dev documentation lint tests type; do
    if ! uv pip install --group "$group"; then
        echo -e "${RED}❌ Failed to install group $group.${NC}" >&2
        exit 1
    fi
done

echo
echo -e "${GREEN}✅ Installation completed with uv.${NC}"